<!--
Nome: Nathan das Chagas Gueler - Nº: 25 - Turma: 2°B
-->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Jogo</title>
                <style>
                        #gameCanvas {
                                    border: 1px solid black;
                                                background-color: lightgray;
                                                        }
                                                                .controls {
                                                                            display: flex;
                                                                                        justify-content: space-around;
                                                                                                    margin-top: 10px;
                                                                                                            }
                                                                                                                    .controls div {
                                                                                                                                display: flex;
                                                                                                                                            flex-direction: column;
                                                                                                                                                    }
                                                                                                                                                            button {
                                                                                                                                                                        margin: 2px;
                                                                                                                                                                                }
                                                                                                                                                                                    </style>
                                                                                                                                                                                    </head>
                                                                                                                                                                                    <body>
                                                                                                                                                                                        <h1>Jogo</h1>
                                                                                                                                                                                            <canvas id="gameCanvas" width="600" height="400"></canvas>

                                                                                                                                                                                                <div class="controls">
                                                                                                                                                                                                        <div>
                                                                                                                                                                                                                    <button onmousedown="startMove('left', 'up')" onmouseup="stopMove('left')">Cima (W)</button>
                                                                                                                                                                                                                                <button onmousedown="startMove('left', 'left')" onmouseup="stopMove('left')">Esquerda (A)</button>
                                                                                                                                                                                                                                            <button onmousedown="startMove('left', 'down')" onmouseup="stopMove('left')">Baixo (S)</button>
                                                                                                                                                                                                                                                        <button onmousedown="startMove('left', 'right')" onmouseup="stopMove('left')">Direita (D)</button>
                                                                                                                                                                                                                                                                </div>
                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                              <div>
                                                                                                                                                                                                                                                                                          <button onmousedown="startMove('right', 'up')" onmouseup="stopMove('right')">Cima (↑)</button>
                                                                                                                                                                                                                                                                                                      <button onmousedown="startMove('right', 'left')" onmouseup="stopMove('right')">Esquerda (←)</button>
                                                                                                                                                                                                                                                                                                                  <button onmousedown="startMove('right', 'down')" onmouseup="stopMove('right')">Baixo (↓)</button>
                                                                                                                                                                                                                                                                                                                              <button onmousedown="startMove('right', 'right')" onmouseup="stopMove('right')">Direita (→)</button>
                                                                                                                                                                                                                                                                                                                                      </div>
                                                                                                                                                                                                                                                                                                                                          </div>

                                                                                                                                                                                                                                                                                                                                              <script>
                                                                                                                                                                                                                                                                                                                                                      const canvas = document.getElementById('gameCanvas');
                                                                                                                                                                                                                                                                                                                                                              const ctx = canvas.getContext('2d');

                                                                                                                                                                                                                                                                                                                                                                      const player1 = { x: 50, y: 180, size: 30, color: 'blue', moveX: 0, moveY: 0 };
                                                                                                                                                                                                                                                                                                                                                                              const player2 = { x: 520, y: 180, size: 30, color: 'red', moveX: 0, moveY: 0 };

                                                                                                                                                                                                                                                                                                                                                                                      let gameInterval;

                                                                                                                                                                                                                                                                                                                                                                                              function startGame() {
                                                                                                                                                                                                                                                                                                                                                                                                          if (!gameInterval) {
                                                                                                                                                                                                                                                                                                                                                                                                                          gameInterval = setInterval(updateGame, 20);
                                                                                                                                                                                                                                                                                                                                                                                                                                      }
                                                                                                                                                                                                                                                                                                                                                                                                                                              }

                                                                                                                                                                                                                                                                                                                                                                                                                                                      function stopGame() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  clearInterval(gameInterval);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                              gameInterval = null;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              function startMove(player, direction) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          if (player === 'left') {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          if (direction === 'up') player1.moveY = -2;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          if (direction === 'down') player1.moveY = 2;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          if (direction === 'left') player1.moveX = -2;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          if (direction === 'right') player1.moveX = 2;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      } else if (player === 'right') {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      if (direction === 'up') player2.moveY = -2;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      if (direction === 'down') player2.moveY = 2;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      if (direction === 'left') player2.moveX = -2;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      if (direction === 'right') player2.moveX = 2;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              startGame();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              function stopMove(player) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          if (player === 'left') {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          player1.moveX = 0;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          player1.moveY = 0;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      } else if (player === 'right') {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      player2.moveX = 0;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      player2.moveY = 0;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  function updateGame() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              movePlayer(player1);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          movePlayer(player2);

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      if (detectCollision()) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      alert('COLISÃO DETECTADA');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      stopGame();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              drawGame();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              function movePlayer(player) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          player.x += player.moveX;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      player.y += player.moveY;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  if (player.x < 0) player.x = 0;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              if (player.y < 0) player.y = 0;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          if (player.x + player.size > canvas.width) player.x = canvas.width - player.size;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      if (player.y + player.size > canvas.height) player.y = canvas.height - player.size;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      function detectCollision() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  const dx = player1.x - player2.x;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              const dy = player1.y - player2.y;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          const distance = Math.sqrt(dx * dx + dy * dy);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      return distance < player1.size;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      function drawGame() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ctx.clearRect(0, 0, canvas.width, canvas.height);

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ctx.fillStyle = player1.color;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ctx.fillRect(player1.x, player1.y, player1.size, player1.size);

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ctx.fillStyle = player2.color;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ctx.fillRect(player2.x, player2.y, player2.size, player2.size);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  window.addEventListener('keydown', function(event) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              if (event.key === 'w') startMove('left', 'up');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          if (event.key === 's') startMove('left', 'down');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      if (event.key === 'a') startMove('left', 'left');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  if (event.key === 'd') startMove('left', 'right');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              if (event.key === 'ArrowUp') startMove('right', 'up');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          if (event.key === 'ArrowDown') startMove('right', 'down');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      if (event.key === 'ArrowLeft') startMove('right', 'left');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  if (event.key === 'ArrowRight') startMove('right', 'right');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          });

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  window.addEventListener('keyup', function(event) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              if (['w', 's', 'a', 'd'].includes(event.key)) stopMove('left');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(event.key)) stopMove('right');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  });

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          drawGame();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              </script>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              </body>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              </html>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              